/*! For license information please see front.bundle.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("p5"));else if("function"==typeof define&&define.amd)define(["p5"],e);else{var i="object"==typeof exports?e(require("p5")):e(t.p5);for(var s in i)("object"==typeof exports?exports:t)[s]=i[s]}}(self,(t=>(()=>{"use strict";var e={991:e=>{e.exports=t}},i={};function s(t){var h=i[t];if(void 0!==h)return h.exports;var n=i[t]={exports:{}};return e[t](n,n.exports,s),n.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var h={};s.r(h),s.d(h,{HEADER:()=>b,arrows:()=>X,fontAldoApache:()=>W,fontOSDMONO:()=>U,fontPixeled:()=>{},fontPointless:()=>B,fontRobot:()=>H,fontSquareo:()=>z,fontminecraft:()=>Z,fontmono:()=>P,fontommy:()=>{},getCanvasSize:()=>tt,getRandomInt:()=>$,getSmallestWindowSize:()=>Q,space:()=>V,tictacboard:()=>K,tictacboard_three:()=>J,tictacboard_two:()=>q,wasd:()=>j,whiteTicTac:()=>Y});var n=s(991),r=s.n(n);class a{static addScreen(t,e){a.screens.push([t,e])}static drawScreen(){a.currentScreen.draw()}static changeScreen(t,e){for(let i=0;i<a.screens.length;i++)t==a.screens[i][1]&&(a.currentScreen=new a.screens[i][0](e))}static getCurrentScreen(){return a.currentScreen}}a.screens=[];const c=a;var o;!function(t){t[t.SCREEN_NUM=0]="SCREEN_NUM",t[t.START_SCREEN=1]="START_SCREEN",t[t.SETUP_SCREEN=2]="SETUP_SCREEN",t[t.LOADING_SCREEN=3]="LOADING_SCREEN",t[t.TUTORIAL_SCREEN=4]="TUTORIAL_SCREEN",t[t.CONTROL_SCREEN=5]="CONTROL_SCREEN",t[t.GAME_SCREEN=6]="GAME_SCREEN",t[t.TEST_SCREEN=7]="TEST_SCREEN"}(o||(o={}));const l={UP:[38,87,119],DOWN:[83,115,40],RIGHT:[68,100,39],LEFT:[65,97,37],SELECT:[32],ESCAPE:[27],NONE:[-1]};class S{constructor(t,e=5){this.do_listen=!0,this.inputdelay=0,this.setDelay=e,this.sketch=t}deactivate(){this.do_listen=!1}activate(){this.do_listen=!0}listen(){if(this.inputdelay<=0){if(0==this.do_listen)return l.NONE;if(this.sketch.keyIsPressed){if(l.UP.includes(this.sketch.keyCode))return this.inputdelay=this.setDelay,this.sketch.keyIsPressed=!1,l.UP;if(l.DOWN.includes(this.sketch.keyCode))return this.inputdelay=this.setDelay,this.sketch.keyIsPressed=!1,l.DOWN;if(l.RIGHT.includes(this.sketch.keyCode))return this.inputdelay=this.setDelay,this.sketch.keyIsPressed=!1,l.RIGHT;if(l.LEFT.includes(this.sketch.keyCode))return this.inputdelay=this.setDelay,this.sketch.keyIsPressed=!1,l.LEFT;if(l.SELECT.includes(this.sketch.keyCode))return this.inputdelay=this.setDelay,this.sketch.keyIsPressed=!1,l.SELECT;if(l.ESCAPE.includes(this.sketch.keyCode))return this.inputdelay=this.setDelay,this.sketch.keyIsPressed=!1,l.ESCAPE}}return this.inputdelay>0&&this.inputdelay--,l.NONE}}class u{constructor(t,e,i,s=new n.Color,h=new n.Color,r=1){this.sketch=t,this.x=e,this.y=i,this.doRotate=!1,this.doTranslate=!1,this.doTint=!1,this.doStroke=!1,this.doFill=!1,this.angle=0,this.tx=0,this.ty=0,this.fill=s,this.stroke=h,this.strokeWeight=r,this.anglem=t.DEGREES,this.orientation=t.CORNER,this.tint=t.color(0,0,0,0)}render(t=function(){}){this.sketch.push(),this.sketch.rectMode(this.orientation),this.sketch.angleMode(this.anglem),this.sketch.noStroke(),this.sketch.noTint(),this.sketch.noFill(),this.doTranslate&&this.sketch.translate(this.tx,this.ty),this.doRotate&&this.sketch.rotate(this.angle),this.doTint&&this.sketch.tint(this.tint),this.doStroke&&this.sketch.stroke(this.stroke),this.doFill&&this.sketch.fill(this.fill),this.sketch.strokeWeight(this.strokeWeight),this.sketch.stroke(this.stroke),this.sketch.fill(this.fill),t(),this.draw(),this.sketch.pop()}setX(t){this.x=t}setY(t){this.y=t}move(t,e){this.x+=t,this.y+=e}roll(t){this.doRotate=!0,this.angle+=t}setAngleMode(t){this.anglem=t}setOrientation(t){this.angle=t,this.doRotate=!0}resetRotation(){this.angle=0,this.doRotate=!1}translate(t,e){this.tx=t,this.ty=e,this.doTranslate=!0}changeTranslation(t,e){this.tx+=t,this.ty+=e,this.doTranslate=!0}resetTranslation(){this.tx=0,this.ty=0,this.doTranslate=!1}setTint(t){this.tint=t,this.doTint=!0}changeTint(t,e,i,s){let h=this.tint.toString("rgba").split(",");this.doTint=!0,this.tint.setAlpha(parseFloat(h[3])+s),this.tint.setRed(parseFloat(h[0])+t),this.tint.setGreen(parseFloat(h[1])+e),this.tint.setBlue(parseFloat(h[2])+i)}unsetTint(){this.doTint=!1}setStroke(t){this.doStroke=!0,this.stroke=t}resetStroke(){this.doStroke=!1,this.stroke=this.sketch.color(0,0,0,0)}setFill(t){this.doFill=!0,this.fill=t}resetFill(){this.doFill=!1,this.fill=this.sketch.color(0,0,0,0)}setFillAlpha(t){this.fill.setAlpha(t)}setStrokeWeight(t){this.strokeWeight=t}incrementFill(t,e,i,s){let h=this.fill.toString("rgba").split(",");this.doFill=!0,this.fill.setAlpha(parseFloat(h[3])+s),this.fill.setRed(parseFloat(h[0])+t),this.fill.setGreen(parseFloat(h[1])+e),this.fill.setBlue(parseFloat(h[2])+i)}incrementStroke(t,e,i,s){this.doStroke=!0;let h=this.stroke.toString("rgba").split(",");this.stroke.setAlpha(parseFloat(h[3])+s),this.stroke.setRed(parseFloat(h[0])+t),this.stroke.setGreen(parseFloat(h[1])+e),this.stroke.setBlue(parseFloat(h[2])+i)}setRectOrientation(t){this.orientation=t}getX(){return this.x}getY(){return this.y}getTX(){return this.tx}getTY(){return this.ty}}class g extends u{constructor(t,e,i,s,h,r=new n.Color,a=new n.Color,c=1){super(i,s,h,r,a,c),this.width=e,this.height=t}draw(){this.sketch.rect(this.x,this.y,this.width,this.height)}setWidth(t){this.width=t}setHeight(t){this.height=t}getWidth(){return this.width}getHeight(){return this.height}}class d extends g{constructor(t,e,i,s,h,r,a=new n.Color,c=new n.Color,o=1){super(e,i,s,h,r,a,c,o),this.img=t,this.width=i,this.height=e,this.imageOrientation=s.CORNER}draw(){this.sketch.imageMode(this.imageOrientation),this.sketch.image(this.img,this.x,this.y,this.width,this.height)}setImageOrientation(t){this.imageOrientation=t}}class E extends u{constructor(t,e,i,s,h,r,a=new n.Color,c=new n.Color,o=1){super(s,e,i,a,c,o),this.text=t,this.size=null!=h?h:10,this.font=null!=r?r:P,this.textOrientation=[s.LEFT,s.BOTTOM],this.textbox=!1,this.txtxt=0,this.tytxt=0}draw(){this.sketch.textFont(this.font),this.sketch.textSize(this.size),this.sketch.textAlign(this.textOrientation[0],this.textOrientation[1]),this.textbox?this.sketch.text(this.text,this.x,this.y,this.txtxt,this.tytxt):this.sketch.text(this.text,this.x,this.y)}setTextOrientation(t=this.sketch.LEFT,e=this.sketch.BOTTOM){this.textOrientation[0]=t,this.textOrientation[1]=e}setFont(t){this.font=t}setText(t){this.text=t}setTextBox(t,e){this.textbox=!0,this.txtxt=t,this.tytxt=e}setTextSize(t){this.size=t}}class T{constructor(...t){this.shapes=[];for(let e=1;e<t.length;e++){if(typeof t[e]!=typeof t[e-1])throw new Error("All arguments must be of the same type");this.shapes.push(t[e])}}callFunctionOnAll(t,...e){this.shapes.forEach((i=>{"function"==typeof i[t]?i[t](...e):console.warn(`Method '${t}' does not exist on shape`,i)}))}}class p{constructor(t,...e){this.keylistener=t,this.animationCondition=function(){},this.doCutscene=!1,this.animation=function(){},this.shapes=[];for(let t=0;t<e.length;t++)this.shapes.push(e[t]);this.onActivate=function(){},this.onDeactivate=function(){}}listen(){this.animationCondition(),this.doCutscene&&this.animation()}activate(){this.doCutscene=!0,p.isPlaying=!0}deactivate(){this.doCutscene=!1,p.isPlaying=!1}setOnActivate(t){this.onActivate=t}setOnDeactivate(t){this.onDeactivate=t}setAnimation(t=function(){}){this.animation=t}setCondition(t=this.activate){this.animationCondition=t}getShape(t){return this.shapes[t]}setShape(t,e){this.shapes[t]=e}}p.isPlaying=!1;const k=p;class _{constructor(t){this.sketch=t,this.keylistener=new S(this.sketch),this.screenState=[0,0],this.tutorialImages=[new T(new d(X,.25*tt(),tt()/2,this.sketch,150,100),new d(j,tt()/4*3,tt()/2,this.sketch,150,100)),new T(new d(V,tt()/2,tt()/2,this.sketch,150,100))];for(let t=0;t<this.tutorialImages.length;t++)this.tutorialImages[t].callFunctionOnAll("setRectOrientation",this.sketch.CENTER),this.tutorialImages[t].callFunctionOnAll("setImageOrientation",this.sketch.CENTER),this.tutorialImages[t].callFunctionOnAll("setTint",0);this.paragraphs=[new T(new E("Use the WASD and/or Arrow keys to navigate through menus and the Ultimate Tictactoe grid.",tt()/2,tt()/5*2,this.sketch),new E("Press space to continue",tt()/2,tt()/4*2,this.sketch)),new T(new E("Press space to select in the menus or play a spot on the Ultimate Tictactoe Grid.",tt()/2,tt()/5*2,this.sketch),new E("Press space to continue",tt()/2,tt()/5*3,this.sketch))];for(let t=0;t<this.paragraphs.length;t++)this.paragraphs[t].callFunctionOnAll("setFill",255,255,255,0),this.paragraphs[t].callFunctionOnAll("setTextSize",.02*tt()),this.paragraphs[t].callFunctionOnAll("setFont",U),this.paragraphs[t].callFunctionOnAll("setRectOrientation",this.sketch.CENTER),this.paragraphs[t].callFunctionOnAll("setTextOrientation",this.sketch.CENTER,this.sketch.CENTER),this.paragraphs[t].callFunctionOnAll("setTextBox",tt()/4*3,tt()/4*1);this.changeScreen=new k(this.keylistener,this.tutorialImages,this.paragraphs,this.screenState,!0),this.changeScreen.setCondition((()=>{this.keylistener.listen()!=l.SELECT||k.isPlaying||(this.keylistener.deactivate(),this.changeScreen.activate())})),this.changeScreen.setAnimation((()=>{this.changeScreen.getShape(3)?this.changeScreen.getShape(2).opacity<255?this.changeScreen.getShape(2).opacity+=4.25:(this.changeScreen.setShape(3,!1),this.changeScreen.deactivate(),this.keylistener.activate()):this.changeScreen.getShape(2).opacity>0?this.changeScreen.getShape(2).opacity-=4.25:(this.changeScreen.setShape(3,!0),this.changeScreen.getShape(2).value>=this.changeScreen.getShape(0).length-1?(this.changeScreen.deactivate(),this.keylistener.activate(),c.changeScreen(o.SETUP_SCREEN,this.sketch)):(this.changeScreen.getShape(2).opacity=0,this.changeScreen.getShape(0)[this.changeScreen.getShape(2).value].callFunction("setTint",0),this.changeScreen.getShape(1)[this.changeScreen.getShape(2).value].callFunction("setFill",255,255,255,0),this.changeScreen.getShape(2).value++)),this.changeScreen.getShape(0)[this.changeScreen.getShape(2).value].callFunction("setTint",this.changeScreen.getShape(2).opacity),this.changeScreen.getShape(1)[this.changeScreen.getShape(2).value].callFunction("setFill",255,255,255,this.changeScreen.getShape(2).opacity)})),this.changeScreen.activate()}draw(){this.sketch.background(0),this.tutorialImages[this.screenState[0]].callFunctionOnAll("render"),this.paragraphs[this.screenState[0]].callFunctionOnAll("render"),this.changeScreen.listen()}resize(){}}var I,R;!function(t){t[t.ONGOING=0]="ONGOING",t[t.DRAW=1]="DRAW",t[t.WIN=2]="WIN",t[t.ERROR=3]="ERROR"}(I||(I={}));class y{constructor(t=0){this.GRID_SIZE=3,this.maxLevelSize=t,this.grid=Array(Math.pow(this.GRID_SIZE*this.GRID_SIZE,this.maxLevelSize)).fill(0),this.state=I.ONGOING,this.selectedLevel=1,this.selectedIndex=0}getSlot(t){return this.grid[t]}setSlot(t,e){this.grid[t]=e}setOwner(t,e,i){i>0?(this.setSlot(t,-1*i),this.setSlot(t+1,e)):this.setSlot(t,e)}getArraySize(){return this.grid.length}getWinner(){return this.grid[0]==this.maxLevelSize?this.grid[1]:0}getLevelSize(){return this.maxLevelSize}getGridSize(){return this.GRID_SIZE}getSelectedLevel(){return this.selectedLevel}getSelectedIndex(){return this.selectedIndex}selectSlot(t,e){return!(this.getSlot(this.selectedIndex+(this.selectedIndex+t+e*this.GRID_SIZE)*(this.GRID_SIZE*this.GRID_SIZE))<0||(this.selectedLevel++,this.selectedIndex+=(this.selectedIndex+t+e*this.GRID_SIZE)*(this.GRID_SIZE*this.GRID_SIZE),console.log("multiplied the selectedIndexTo: "+this.selectedIndex),console.log("The selected levelSize is: "+this.selectedLevel),0))}updateSlot(t,e,i){if(0!=this.grid[this.selectedIndex+e+i*this.GRID_SIZE])return I.ERROR;this.grid[this.selectedIndex+e+i*this.GRID_SIZE]=t;let s=this.checkForWinOrFull(this.selectedIndex+e+i*this.GRID_SIZE);if(s!=I.ONGOING)return s;let h=this.getFirstSpot(this.selectedIndex,this.selectedLevel)+(e+i*this.GRID_SIZE)*Math.pow(this.GRID_SIZE*this.GRID_SIZE,this.maxLevelSize-(this.selectedLevel-1));for(let t=this.selectedLevel;t>0;t--)this.getSlot(h)<-1*(this.maxLevelSize-this.selectedLevel)&&(this.selectedLevel--,h=this.getFirstSpot(h,this.selectedLevel+1));return this.selectedIndex=h,I.ONGOING}getRelativeIndex(t,e){let i=Math.pow(this.GRID_SIZE*this.GRID_SIZE,this.maxLevelSize-t),s=e-Math.floor(e/i)*i,h=i/(this.GRID_SIZE*this.GRID_SIZE);return Math.floor(s/h)}checkForWinOrFull(t){for(let e=this.maxLevelSize;e>=1;e--){console.log("started loop of levelSize "+e);let i=this.getRow(e-1,t),s=this.getCol(e-1,t),h=this.calculateSize(this.maxLevelSize-e),n=t-i*this.GRID_SIZE*h-s*h,r=!0;for(let t=1;t<this.GRID_SIZE;t++)if(this.getOwner(n+i*this.GRID_SIZE*h+t*h)!=this.getOwner(n+i*this.GRID_SIZE*h+t*h-h)){console.log("Row win broken"),r=!1;break}if(r){if(console.log("Row win detected"),this.setOwner(n,this.getSlot(t),e-1),1==e)return I.WIN;continue}r=!0;for(let t=1;t<this.GRID_SIZE;t++)if(console.log("Column, ahead ("+(n+s*h+t*h*this.GRID_SIZE)+", "+this.getOwner(n+s*h+t*h*this.GRID_SIZE)+")"),console.log("Column, behind("+(n+s*h+(t-1)*h*this.GRID_SIZE)+", "+this.getOwner(n+s*h+(t-1)*h*this.GRID_SIZE)+")"),this.getOwner(n+s*h+t*h*this.GRID_SIZE)!=this.getOwner(n+s*h+(t-1)*h*this.GRID_SIZE)){console.log("Col win broken"),r=!1;break}if(r){if(console.log("Col win detected"),this.setOwner(n,this.getSlot(t),e-1),1==e)return I.WIN;continue}if(r=!0,s==i){for(let t=1;t<this.GRID_SIZE;t++)if(this.getOwner(n+t*this.GRID_SIZE*h+t*h)!=this.getOwner(n+t*this.GRID_SIZE*h+t*h-h-h*this.GRID_SIZE)){console.log("diag win broken"),r=!1;break}if(r){if(console.log("diag win detected"),this.setOwner(n,this.getSlot(t),e-1),1==e)return I.WIN;continue}r=!0}if(i==this.GRID_SIZE-s-1){for(let t=1;t<this.GRID_SIZE;t++)if(this.getOwner(n+h*t*this.GRID_SIZE+((this.GRID_SIZE-1)*h-t*h))!=this.getOwner(n+t*h*this.GRID_SIZE+((this.GRID_SIZE-1)*h-h*t)+h-h*this.GRID_SIZE)){console.log("backdiag win broken"),r=!1;break}if(r){if(console.log("backdiag win detected"),this.setOwner(n,this.getSlot(t),e-1),1==e)return I.WIN;continue}}let a=!0;for(let t=0;t<this.GRID_SIZE*this.GRID_SIZE*h;t+=h)if(0==this.getOwner(n+t)){console.log("full broken"),a=!1;break}if(!a)break;if(console.log("full detected"),this.setOwner(n,0,e-1),1==e)return I.DRAW}return I.ONGOING}getCol(t,e){return this.getRelativeIndex(t,e)%this.GRID_SIZE}getRow(t,e){return Math.floor(this.getRelativeIndex(t,e)/this.GRID_SIZE)}calculateSize(t){return Math.pow(this.GRID_SIZE*this.GRID_SIZE,t)}calculateSideSize(t){return Math.sqrt(this.GRID_SIZE*this.GRID_SIZE^t)}getOwner(t){return this.getSlot(t)<0?this.getSlot(t+1):this.getSlot(t)}getFirstSpot(t,e){return t-t%this.calculateSize(e)}}!function(t){t[t.LOCAL=0]="LOCAL",t[t.ONLINE=1]="ONLINE"}(R||(R={}));class C{constructor(t=R.LOCAL,e=3,i=2){this.gameType=t,this.gridSize=e,this.board=new y(i),this.turn=1,this.isWon=!1,this.playerNumber=2}playMove(t,e){let i=this.board.updateSlot(this.turn,t,e);return i==I.ONGOING?(this.changeTurn(),!0):i!=I.ERROR}getBoard(){return this.board}getTurn(){return this.turn}changeTurn(){this.turn=this.turn%this.playerNumber+1}}class N{constructor(t,e,i,s,h){this.isConfirmed=!0,this.selected=!0,this.gridSize=h*N.BOARD_SHRINK_CONSTANT,this.x=i-this.gridSize/2,this.y=s-this.gridSize/2,this.GRID_SIZE=e.getBoard().getGridSize(),this.lineNum=this.GRID_SIZE-1,this.cursorRow=0,this.cursorCol=0,this.cursorOn=!0,this.game=e,this.tictac=e.getBoard(),this.maxLevelSize=this.tictac.getLevelSize(),this.cache=Array.from({length:this.maxLevelSize+1},(()=>[])),this.cachePoints(),this.sketch=t}cachePoints(){for(let t=0;t<=this.maxLevelSize;t++){let e=Math.pow(this.GRID_SIZE*this.GRID_SIZE,this.maxLevelSize-t);for(let i=0;i<this.tictac.getArraySize()/e;i++){let s=this.x,h=this.y;for(let n=0;n<t;n++){let t=this.tictac.getCol(n,i*e),r=this.tictac.getRow(n,i*e);s+=t*this.calculateSize(n+1)+t*this.calculateMarginSize(n+1)+this.calculateMarginSize(n+1)/2,h+=r*this.calculateSize(n+1)+r*this.calculateMarginSize(n+1)+this.calculateMarginSize(n+1)/2}this.cache[t].push([s,h])}}}draw(){this.sketch.stroke(255);for(let t=0;t<this.maxLevelSize;t++){let e=Math.pow(this.GRID_SIZE*this.GRID_SIZE,this.maxLevelSize-t);for(let i=0;i<this.tictac.getArraySize()/e;i++){let s=this.tictac.getSlot(i*e);-1*s==this.maxLevelSize-t?this.drawIcon(t,i*e+1,i):-1*s>this.maxLevelSize-t?t+=Math.pow(this.GRID_SIZE*this.GRID_SIZE,-1*s)-1:this.drawTicTac(t,i)}}for(let t=0;t<this.tictac.getArraySize();t++){let e=this.tictac.getSlot(t);e<0?t+=Math.pow(this.GRID_SIZE*this.GRID_SIZE,-1*e)-1:this.drawIcon(this.maxLevelSize,t,t)}this.cursorOn&&this.renderCursor()}drawTicTac(t,e){let i=this.calculateSize(t),s=this.cache[t][e][0],h=this.cache[t][e][1];this.sketch.strokeWeight(1);for(let t=0;t<this.lineNum;t++)this.sketch.line(s+i/this.GRID_SIZE*(t+1),h,s+i/this.GRID_SIZE*(t+1),h+i),this.sketch.line(s,h+i/this.GRID_SIZE*(t+1),s+i,h+i/this.GRID_SIZE*(t+1))}drawIcon(t,e,i){let s=this.calculateSize(t),h=this.cache[t][i][0],n=this.cache[t][i][1];this.sketch.strokeWeight(1);let r=this.tictac.getSlot(e);switch(r){case 0:break;case 1:this.sketch.stroke(255),this.sketch.line(h,n,h+s,n+s),this.sketch.line(h+s,n,h,n+s);break;case 2:this.sketch.stroke(255),this.sketch.noFill(),this.sketch.ellipseMode(this.sketch.CENTER),this.sketch.ellipse(h+s/2,n+s/2,s*(N.SMALLEST_BOARD_PERCENT/100),s*(N.SMALLEST_BOARD_PERCENT/100));break;default:this.sketch.textSize(s),this.sketch.textAlign(this.sketch.CENTER,this.sketch.CENTER),this.sketch.text(r,h+s/2,n+s/2)}}calculateSize(t){return this.gridSize*Math.pow(N.BOARD_SHRINK_CONSTANT/this.GRID_SIZE,t)}calculateMarginSize(t){return this.calculateSize(t)/N.BOARD_SHRINK_CONSTANT*(1-N.BOARD_SHRINK_CONSTANT)}getCacheIndex(){return this.tictac.getSelectedIndex()}cursorUp(){this.cursorRow<=0?this.cursorRow=this.GRID_SIZE-1:this.cursorRow-=1}cursorDown(){this.cursorRow>=this.GRID_SIZE-1?this.cursorRow=0:this.cursorRow+=1}cursorLeft(){this.cursorCol<=0?this.cursorCol=this.GRID_SIZE-1:this.cursorCol-=1}cursorRight(){this.cursorCol>=this.GRID_SIZE-1?this.cursorCol=0:this.cursorCol+=1}playMove(){if(this.game.playMove(this.cursorCol,this.cursorRow))return this.cursorCol=0,void(this.cursorRow=0)}renderCursor(){this.sketch.rectMode(this.sketch.CORNER),this.sketch.noFill(),this.sketch.strokeWeight(5),this.sketch.rect(this.cache[this.tictac.getSelectedLevel()][this.getCacheIndex()+this.cursorRow*this.GRID_SIZE+this.cursorCol][0],this.cache[this.tictac.getSelectedLevel()][this.getCacheIndex()+this.cursorRow*this.GRID_SIZE+this.cursorCol][1],this.calculateSize(this.tictac.getSelectedLevel()),this.calculateSize(this.tictac.getSelectedLevel()))}selectTicTac(){this.tictac.getSelectedLevel()==this.tictac.getLevelSize()?this.playMove():(this.tictac.selectSlot(this.cursorCol,this.cursorRow),this.cursorCol=0,this.cursorRow=0)}deselectTicTac(){this.isConfirmed=!1}reset(){this.selected=!1,this.isConfirmed=!1}confirm(){this.isConfirmed=!0}setSelected(t){this.selected=t}isSelected(){return this.selected}getX(){return this.x}getY(){return this.y}}N.BOARD_SHRINK_CONSTANT=.8,N.ICON_SHRINK_CONSTANT=.6,N.SMALLEST_BOARD_PERCENT=75;const A=N;class O{constructor(t,e=R.LOCAL,i=3,s=2){this.keylistener=new S(t),this.sketch=t,this.game=new C(e,i,s),this.board=new A(this.sketch,this.game,tt()/2,tt()/2,tt()),this.title=new E("Utimate Tictactoe",tt()/2,tt()/20*1,this.sketch,.04*tt(),P),this.mode=new E("Local Mode",tt()/2,tt()/20*2,this.sketch,.04*tt(),P),this.currentPlayerTitle=new E("Current Player:",tt()/2,tt()/20*17,this.sketch,.03*tt(),P),this.currentPlayer=new E(b.PLAYER_NAMES[0],tt()/2,tt()/20*18,this.sketch,.03*tt(),P),this.info=new T(this.title,this.mode,this.currentPlayer,this.currentPlayerTitle),this.info.callFunctionOnAll("setFont",U),this.info.callFunctionOnAll("setTextOrientation",this.sketch.CENTER,this.sketch.CENTER),this.info.callFunctionOnAll("setFill",255,255,255,255)}draw(){this.sketch.background(0),this.info.callFunctionOnAll("render"),this.board.draw();let t=this.keylistener.listen();t==l.UP?this.board.cursorUp():t==l.DOWN?this.board.cursorDown():t==l.LEFT?this.board.cursorLeft():t==l.RIGHT?this.board.cursorRight():t==l.SELECT&&this.board.selectTicTac()}resize(){}}class f{constructor(t){this.sketch=t,this.keylistener=new S(this.sketch),this.spinner=new d(Y,0,0,this.sketch,.1*tt(),.1*tt()),this.spinner.setRectOrientation(this.sketch.CENTER),this.spinner.setImageOrientation(this.sketch.CENTER),this.spinner.setAngleMode(this.sketch.RADIANS),this.spinner.trnslate(tt()/8*-1,tt()/8*7),this.title=new E(b.LOADING_SCREEN_TITLE_MESSAGES[0]+b.DOTS[0],tt()/2,tt()/5,this.sketch,.07*tt(),H,this.sketch.color(255,255,255)),this.title.setFill(t.color(255,255,255,0)),this.title.setTextOrientation(this.sketch.CENTER,this.sketch.CENTER),this.loadingMessage=new E(b.LOADING_SCREEN_MESSAGES[0],tt()/2,tt()/2,this.sketch,.03*tt(),Z,this.sketch.color(255,255,255)),this.loadingMessage.setFill(t.color(255,255,255,0)),this.loadingMessage.setRectOrientation(this.sketch.CENTER),this.loadingMessage.setTextOrientation(this.sketch.CENTER,this.sketch.CENTER),this.loadingMessage.setTextBox(tt(),tt()),this.transition_in=new k(this.keylistener,this.spinner,this.title,this.loadingMessage,tt()/2/120,0),this.transition_in.setCondition((()=>{this.transition_in.getShape(1).opacity>=255&&(this.transition_in.deactivate(),this.keylistener.activate())})),this.transition_in.setAnimation((()=>{this.transition_in.getShape(0).tx>=tt()/8*7?(this.transition_in.getShape(1).setFill(255,255,255,this.transition_in.getShape(4)),this.transition_in.getShape(2).setFill(255,255,255,this.transition_in.getShape(4)),this.transition_in.setShape(4,this.transition_in.getShape(4)+255/90)):this.transition_in.getShape(0).tx+=tt()/90})),this.keylistener.deactivate(),this.transition_in.activate(),this.loadCutscene=new k(this.keylistener,this.spinner,0,0,$(0,b.LOADING_SCREEN_MESSAGES.length-1),this.loadingMessage,0,this.title),this.loadCutscene.setAnimation((()=>{this.loadCutscene.getShape(0).rotateExact(this.loadCutscene.getShape(2),this.sketch.DEGREES),this.loadCutscene.getShape(0).setTint(127.5*this.sketch.cos(this.loadCutscene.getShape(1))+127.5),this.loadCutscene.setShape(1,this.loadCutscene.getShape(1)+2),this.loadCutscene.setShape(2,this.loadCutscene.getShape(2)+3),this.loadCutscene.getShape(2)/3%60==0&&(this.loadCutscene.setShape(5,this.loadCutscene.getShape(5)+1),this.loadCutscene.getShape(6).setText(b.LOADING_SCREEN_TITLE_MESSAGES[0]+b.DOTS[this.loadCutscene.getShape(5)%b.DOTS.length])),this.loadCutscene.getShape(2)/3%480==0&&(this.loadCutscene.setShape(3,this.loadCutscene.getShape(3)+1),this.loadCutscene.getShape(4).setText(b.LOADING_SCREEN_MESSAGES[this.loadCutscene.getShape(3)%b.LOADING_SCREEN_MESSAGES.length])),this.loadCutscene.getShape(2)/3>2147483645/3&&this.loadCutscene.setShape(2,0)})),this.loadCutscene.activate()}draw(){this.sketch.background(0),this.spinner.render(),this.title.render(),this.loadingMessage.render(),this.loadCutscene.listen(),this.transition_in.listen()}resize(){}}class w{constructor(t,e,i,s){this.vx=0,this.vy=0,this.sv=0,this.width=i,this.length=s,this.sketch=t,this.floater=new d(e,s,i,t,0,0)}init(){this.vx=this.randomVelocity(),this.vy=this.randomVelocity(),this.sv=this.randomVelocity(),this.floater.setTint(this.sketch.color(255,255,255,255)),this.floater.translate(this.randomCoord(),this.randomCoord())}draw(){this.floater.roll(this.sv),this.floater.render(),this.floater.changeTranslation(this.vx,this.vy),this.doBounce()&&this.bounce()}doBounce(){return this.floater.getTX()+this.width/2>tt()||this.floater.getTX()-this.floater.getWidth()/2<0||this.floater.getTY()+this.floater.getHeight()/2>tt()||this.floater.getTY()-this.floater.getHeight()/2<0}bounce(){(this.floater.getTX()+this.floater.getWidth()/2>tt()||this.floater.getTX()-this.width/2<0)&&(this.vx=-1*this.vx),(this.floater.getTY()+this.floater.getHeight()/2>tt()||this.floater.getTY()-this.floater.getHeight()/2<0)&&(this.vy=-1*this.vy),this.sv=-1*this.sv}setOpacity(t){this.floater.setTint(this.sketch.color(255,255,255,t))}fadeIn(t){this.floater.changeTint(0,0,0,255/t)}randomCoord(){return $(0+this.width/2,tt()-this.width/2)}randomVelocity(){return $(-3,3)}fadeOut(t){this.floater.changeTint(0,0,0,-255/t)}}class m{constructor(t){this.itemArray=t,this.currentlySelected=t[0],this.currentlySelected.setSelected(!0)}drawAll(){for(let t=0;t<this.itemArray.length;t++)this.itemArray[t].draw()}reset(){for(let t=0;t<this.itemArray.length;t++)this.itemArray[t].reset();this.currentlySelected=this.itemArray[0],this.currentlySelected.setSelected(!0)}confirm(){this.currentlySelected.confirm()}findClosest(t){let e=1,i=0,s=!1;2!=t&&3!=t||(e=-1);let h=[];for(let i=0;i<this.itemArray.length;i++)this.relevantValue(this.itemArray[i],t)>this.relevantValue(this.currentlySelected,t)&&1==e&&(h.push(this.itemArray[i]),s=!0),this.relevantValue(this.itemArray[i],t)<this.relevantValue(this.currentlySelected,t)&&-1==e&&(h.push(this.itemArray[i]),s=!0);for(let e=0;e<h.length;e++)Math.abs(this.oppositeRelevantValue(this.currentlySelected,t)-this.oppositeRelevantValue(h[e],t))<Math.abs(this.oppositeRelevantValue(this.currentlySelected,t)-this.oppositeRelevantValue(h[i],t))&&(i=e);return s?this.itemArray.indexOf(h[i]):this.itemArray.indexOf(this.currentlySelected)}selectClosest(t){let e=this.findClosest(t);this.itemArray[e]!=this.currentlySelected&&(this.itemArray[e].setSelected(!0),this.currentlySelected.setSelected(!1),this.currentlySelected=this.itemArray[e])}relevantValue(t,e){return 0==e||2==e?t.getY():t.getX()}oppositeRelevantValue(t,e){return 0==e||2==e?t.getX():t.getY()}select(t){this.itemArray[t].setSelected(!0)}unselect(t){this.itemArray[t].setSelected(!1)}changeSelected(t){this.unselect(this.itemArray.indexOf(this.currentlySelected)),this.currentlySelected=this.itemArray[t],this.select(t)}getLength(){return this.itemArray.length}}class D{constructor(t,e,i,s,h,n,r,a=255){this.selected=!1,this.confirmed=!1,this.x=e,this.y=i,this.phrase=s,this.animationTime=0,this.length=h,this.width=n,this.currentLength=h,this.currentWidth=n,this.textSize=r,this.currentTextSize=r,this.currentButtonFill=D.DEFAULT_BUTTON_SHADE,this.currentTextFill=D.SELECTED_BUTTON_SHADE,this.cw=0,this.cl=0,this.opacity=a,this.confirmedAnimation=!1,this.sketch=t}standardButton(){this.sketch.textFont("Arial"),0==this.animationTime?this.sketch.noFill():(this.currentWidth-=this.width*(D.GROWTH_PERCENT/100)/D.SELECTED_ANIMATION_TIME,this.currentLength-=this.length*(D.GROWTH_PERCENT/100)/D.SELECTED_ANIMATION_TIME,this.currentButtonFill-=(D.SELECTED_BUTTON_SHADE-D.DEFAULT_BUTTON_SHADE)/D.SELECTED_ANIMATION_TIME,this.currentTextFill+=(D.SELECTED_BUTTON_SHADE-D.DEFAULT_BUTTON_SHADE)/D.SELECTED_ANIMATION_TIME,this.sketch.fill(this.currentButtonFill,this.opacity),this.animationTime--),this.sketch.strokeWeight(1),this.sketch.stroke(255,this.opacity),this.sketch.rectMode(this.sketch.CENTER),this.sketch.rect(this.x*tt(),this.y*tt(),this.currentWidth*tt(),this.currentLength*tt()),this.sketch.textSize(this.currentTextSize),this.sketch.fill(this.currentTextFill,this.opacity),this.sketch.noStroke(),this.sketch.textAlign(this.sketch.CENTER,this.sketch.CENTER),this.sketch.text(this.phrase,this.x*tt(),this.y*tt(),this.currentWidth*tt(),this.currentLength*tt())}reset(){this.cw=0,this.cl=0,this.opacity=255,this.confirmed=!1,this.confirmedAnimation=!1,this.animationTime=0,this.selected=!1,this.currentLength=this.length,this.currentWidth=this.width,this.currentTextFill=255,this.currentButtonFill=0,this.currentTextSize=this.textSize}isSelected(){return 1==this.selected}setSelected(t){this.selected=t}selectedButton(){this.sketch.textFont("Arial"),this.animationTime>D.SELECTED_ANIMATION_TIME||(this.currentWidth+=this.width*(D.GROWTH_PERCENT/100)/D.SELECTED_ANIMATION_TIME,this.currentLength+=this.length*(D.GROWTH_PERCENT/100)/D.SELECTED_ANIMATION_TIME,this.currentButtonFill+=(D.SELECTED_BUTTON_SHADE-D.DEFAULT_BUTTON_SHADE)/D.SELECTED_ANIMATION_TIME,this.currentTextFill-=(D.SELECTED_BUTTON_SHADE-D.DEFAULT_BUTTON_SHADE)/D.SELECTED_ANIMATION_TIME,this.animationTime++),this.sketch.strokeWeight(1),this.sketch.stroke(255,this.opacity),this.sketch.fill(this.currentButtonFill,this.opacity),this.sketch.rect(this.x*tt(),this.y*tt(),this.currentWidth*tt(),this.currentLength*tt()),this.sketch.textSize(this.currentTextSize),this.sketch.fill(this.currentTextFill,this.opacity),this.sketch.noStroke(),this.sketch.textAlign(this.sketch.CENTER,this.sketch.CENTER),this.sketch.text(this.phrase,this.x*tt(),this.y*tt(),this.currentWidth*tt(),this.currentLength*tt())}confirmedButton(){this.sketch.textFont("Arial"),this.animationTime>D.CONFIRMED_ANIMATION_TIME?(this.opacity=0,this.confirmedAnimation=!0):(this.cl+=(D.GROWTH_PERCENT/100*(this.currentLength*tt())+this.currentLength*tt())/D.CONFIRMED_ANIMATION_TIME,this.cw+=(D.GROWTH_PERCENT/100*(this.currentWidth*tt())+this.currentWidth*tt())/D.CONFIRMED_ANIMATION_TIME,this.currentTextFill+=(D.SELECTED_BUTTON_SHADE-D.DEFAULT_BUTTON_SHADE)/D.CONFIRMED_ANIMATION_TIME,this.opacity-=255/D.CONFIRMED_ANIMATION_TIME,this.animationTime++),this.sketch.noStroke(),this.sketch.fill(255),this.sketch.rect(this.x*tt(),this.y*tt(),this.currentWidth*tt()-this.cw,this.currentLength*tt()-this.cl),this.sketch.textSize(this.currentTextSize),this.sketch.fill(this.currentTextFill),this.sketch.tint(0,255),this.sketch.textAlign(this.sketch.CENTER,this.sketch.CENTER),this.sketch.text(this.phrase,this.x*tt(),this.y*tt(),this.currentWidth*tt(),this.currentLength*tt()),this.sketch.stroke(255,this.opacity),this.sketch.fill(0),this.sketch.strokeWeight(D.OUTLINE_WEIGHT),this.sketch.rect(this.x*tt(),this.y*tt(),D.OUTLINE_WEIGHT+this.cw,this.cl+D.OUTLINE_WEIGHT)}fade(){this.opacity-=255/(D.CONFIRMED_ANIMATION_TIME/4)}isConfirmed(){return this.confirmed}isConfirmedAnimationDone(){return this.confirmedAnimation}confirm(){this.confirmed=!0}draw(){1==this.confirmed?this.confirmedButton():0==this.isSelected()?this.standardButton():1==this.isSelected()&&this.selectedButton()}fadeIn(t){this.opacity+=255/t}setOpacity(t){this.opacity=t}getX(){return this.x}getY(){return this.y}}D.DEFAULT_BUTTON_SHADE=0,D.SELECTED_BUTTON_SHADE=255,D.GROWTH_PERCENT=25,D.CONFIRMED_GROWTH_PERCENT=100,D.SELECTED_ANIMATION_TIME=5,D.CONFIRMED_ANIMATION_TIME=60,D.OUTLINE_WEIGHT=5;const x=15;class v{constructor(t){this.sketch=t,this.keylistener=new S(this.sketch),this.floater_array=new Array(4);for(let t=0;t<4;t++)this.floater_array[t]=new w(this.sketch,Y,50,50),this.floater_array[t].setOpacity(0),this.floater_array[t].init();this.opacity=0,this.border_pos=0,this.border=new g(tt()/2,tt()/2,this.sketch,tt()+x,tt()+x),this.border.unsetFill(),this.border.setStrokeWeight(x),this.border.setRectOrientation(this.sketch.CENTER),this.border.setStroke(t.color(255,255,255,255)),this.title=new E(b.SETUP_SCREEN_TITLE,tt()/2,tt()/5,this.sketch,.05*tt(),B,this.sketch.color(255,255,255)),this.title.setTextOrientation(this.sketch.CENTER,this.sketch.CENTER),this.title.setStroke(t.color(255,255,255,this.opacity)),this.title.setFill(t.color(255,255,255,0)),this.multiplayer_MenuButton_list=new m([new D(this.sketch,.5,.4,"Local",.1,.1,12.5,0),new D(this.sketch,.8,.85,"How to play",.05,.15,12.5,0),new D(this.sketch,.2,.85,"Controls",.05,.15,12.5,0),new D(this.sketch,.5,.6,"Online",.1,.1,12.5,0)]),this.transition_in=new k(this.keylistener,this.multiplayer_MenuButton_list,this.floater_array,this.title,this.border,this.border_pos,this.opacity),this.transition_in.setCondition((()=>{this.transition_in.getShape(1)[this.transition_in.getShape(1).length-1].opacity>=255&&(this.transition_in.deactivate(),this.keylistener.activate())})),this.transition_in.setAnimation((()=>{if(this.transition_in.getShape(4)>=30){for(let t=0;t<this.transition_in.getShape(0).buttonArray.length;t++)this.transition_in.getShape(0).buttonArray[t].opacity<=255&&this.transition_in.getShape(0).buttonArray[t].fadeIn(80);if(this.transition_in.getShape(5)<255&&(this.transition_in.setShape(5,this.transition_in.getShape(8.1875)),this.transition_in.getShape(2).setStroke(255,255,255,this.transition_in.getShape(5))),this.transition_in.getShape(5)>=255)for(let t=0;t<this.transition_in.getShape(1).length;t++)this.transition_in.getShape(1)[t].fadeIn(40)}else this.transition_in.setShape(4,this.transition_in.getShape(4)+.75),this.transition_in.getShape(3).setWidth(tt()+x-this.transition_in.getShape(4)),this.transition_in.getShape(3).setHeight(tt()+x-this.transition_in.getShape(4))})),this.keylistener.deactivate(),this.transition_in.activate(),this.transition_out=new k(this.keylistener,this.multiplayer_MenuButton_list,this.floater_array,this.title,this.border,30,255),this.transition_out.setCondition((()=>{this.transition_out.getShape(0).currentlySelected.isConfirmed()&&!k.isPlaying?(this.transition_out.activate(),this.keylistener.deactivate()):this.transition_out.getShape(0).currentlySelected.isConfirmedAnimationDone()&&(this.transition_out.deactivate(),this.keylistener.activate(),"Online"==this.transition_out.getShape(0).currentlySelected.phrase?c.changeScreen(o.LOADING_SCREEN,this.sketch):"Local"==this.transition_out.getShape(0).currentlySelected.phrase?c.changeScreen(o.GAME_SCREEN,this.sketch):"Controls"==this.transition_out.getShape(0).currentlySelected.phrase?c.changeScreen(o.CONTROL_SCREEN,this.sketch):"How to play"==this.transition_out.getShape(0).currentlySelected.phrase?c.changeScreen(o.TUTORIAL_SCREEN,this.sketch):c.changeScreen(o.START_SCREEN,this.sketch))})),this.transition_out.setAnimation((()=>{for(let t=0;t<this.transition_out.getShape(0).buttonArray.length;t++)this.transition_out.getShape(0).buttonArray[t]==this.transition_out.getShape(0).currentlySelected||this.transition_out.getShape(0).buttonArray[t].fade();for(let t=0;t<this.transition_out.getShape(1).length;t++)this.transition_out.getShape(1)[t].fadeOut(D.CONFIRMED_ANIMATION_TIME/4);this.transition_out.setShape(4,this.transition_out.getShape(4)-30/(D.CONFIRMED_ANIMATION_TIME/4)),this.transition_out.getShape(3).setWidth(tt()+x-this.transition_out.getShape(4)),this.transition_out.getShape(3).setHeight(tt()+x-this.transition_out.getShape(4)),this.transition_out.getShape(2).setStroke(255,255,255,this.transition_out.getShape(4)),this.transition_out.setShape(5,this.transition_out.getShape(5)-255/(D.CONFIRMED_ANIMATION_TIME/4))}))}draw(){this.sketch.background(0),this.border.render();for(let t=0;t<this.multiplayer_MenuButton_list.getLength();t++)this.multiplayer_MenuButton_list.drawAll();for(let t=0;t<this.floater_array.length;t++)this.floater_array[t].draw();this.title.render();let t=this.keylistener.listen();this.transition_in.listen(),this.transition_out.listen(),t==l.UP?this.multiplayer_MenuButton_list.selectClosest(2):t==l.RIGHT?this.multiplayer_MenuButton_list.selectClosest(1):t==l.DOWN?this.multiplayer_MenuButton_list.selectClosest(0):t==l.LEFT?this.multiplayer_MenuButton_list.selectClosest(3):t==l.SELECT&&(this.opacity=255,this.multiplayer_MenuButton_list.confirm())}resize(){}}class L{constructor(t){this.sketch=t,this.keylistener=new S(t),this.title=new E(b.START_SCREEN_TITLE,tt()/2,tt()/5,this.sketch,.05*tt(),B,this.sketch.color(255,255,255)),this.title.setTextOrientation(this.sketch.CENTER,this.sketch.CENTER),this.title.setAngleMode(this.sketch.RADIANS),this.author=new E(b.START_SCREEN_AUTHOR,tt()/2,tt()/10*3,this.sketch,.05*tt(),W,this.sketch.color(127,127,127)),this.author.setTextOrientation(this.sketch.CENTER,this.sketch.CENTER),this.author.setAngleMode(this.sketch.RADIANS),this.startMessage=new E(b.START_SCREEN_MESSAGE,tt()/2,tt()/2,this.sketch,.05*tt(),z,this.sketch.color(200,200,200)),this.startMessage.setTextOrientation(this.sketch.CENTER,this.sketch.CENTER),this.startMessage.setAngleMode(this.sketch.RADIANS),this.s=0,this.startCutscene=new k(this.keylistener,this.title,this.author,this.startMessage,this.s),this.startCutscene.setCondition((()=>{this.keylistener.listen()!=l.SELECT||k.isPlaying?this.startCutscene.getShape(2).getY()<-1*tt()?(this.startCutscene.deactivate(),c.changeScreen(o.SETUP_SCREEN,this.sketch)):this.startCutscene.getShape(2).setFillAlpha(128+128*this.sketch.sin(this.sketch.millis()/500)):(this.startCutscene.activate(),this.keylistener.deactivate())})),this.startCutscene.setAnimation((()=>{this.startCutscene.getShape(0).setY(tt()/5+tt()*this.sketch.sin((this.startCutscene.getShape(3)+(100*this.sketch.asin(3/4)+200*this.sketch.PI))/100)-tt()/4*3),this.startCutscene.getShape(1).setY(tt()/10*3+tt()*this.sketch.sin((this.startCutscene.getShape(3)+(100*this.sketch.asin(3/4)+200*this.sketch.PI))/100)-tt()/4*3),this.startCutscene.getShape(2).setY(tt()/2+tt()*this.sketch.sin((this.startCutscene.getShape(3)+(100*this.sketch.asin(3/4)+200*this.sketch.PI))/100)-tt()/4*3),this.startCutscene.setShape(3,this.startCutscene.getShape(3)+2),this.startCutscene.getShape(2).setFillAlpha(128*this.sketch.sin(this.sketch.millis()/50))}))}draw(){this.sketch.background(0),this.title.render(),this.author.render(),this.startMessage.render(),this.startCutscene.listen()}resize(){}}class M{constructor(t){this.sketch=t,this.game=new C(R.LOCAL,3,2),this.board=new A(t,this.game,tt()/2,tt()/2,tt()-100),this.keylistener=new S(t)}init(){}draw(){this.sketch.background(0),this.board.draw();let t=this.keylistener.listen();t==l.UP?this.board.cursorUp():t==l.DOWN?this.board.cursorDown():t==l.LEFT?this.board.cursorLeft():t==l.RIGHT?this.board.cursorRight():t==l.SELECT?this.board.selectTicTac():l.ESCAPE}resize(){this.board.cachePoints()}}class G{constructor(t){this.sketch=t,this.keylistener=new S(this.sketch),this.screenState=[0,0],this.tutorialImages=[new d(K,tt()/2,tt()/20*9,this.sketch,.4*tt(),.4*tt()),new d(q,tt()/2,tt()/20*9,this.sketch,.4*tt(),.4*tt()),new d(J,tt()/2,tt()/20*9,this.sketch,.4*tt(),.4*tt())];for(let e=0;e<this.tutorialImages.length;e++)this.tutorialImages[e].setRectOrientation(this.sketch.CENTER),this.tutorialImages[e].setImageOrientation(this.sketch.CENTER),this.tutorialImages[e].setTint(t.color(0));this.paragraphs=[new T(new E("The Bigtictactoe board consists of one large tictactoe grid.",tt()/2,tt()/10*1,this.sketch),new E("Each slot in the grid contains one smaller tictactoe grid.",tt()/2,tt()/10*2,this.sketch),new E("The goal of the game is to get three points in a row on the large board.",tt()/2,tt()/10*7,this.sketch),new E("Press space to continue.",tt()/2,tt()/5*4,this.sketch)),new T(new E("To start, player one can choose anyone of the small grids to play in.",tt()/2,tt()/10,this.sketch),new E("They are then able to mark anywhere in that small grid.",tt()/2,tt()/10*2,this.sketch),new E("The next player will then be sent to the corresponding area on the large grid.",tt()/2,tt()/10*7,this.sketch),new E("Press space to continue.",tt()/2,tt()/5*4,this.sketch)),new T(new E("The player can then choose any grid to play in if the grid they are sent to is taken.",tt()/2,tt()/10,this.sketch),new E("When a small grid is won, it becomes unable to be played in.",tt()/2,tt()/10*2,this.sketch),new E("That is everything! Have Fun!",tt()/2,tt()/10*7,this.sketch),new E("Press space to continue.",tt()/2,tt()/5*4,this.sketch))];for(let t=0;t<this.paragraphs.length;t++)this.paragraphs[t].callFunctionOnAll("setFill",255,255,255,0),this.paragraphs[t].callFunctionOnAll("setTextSize",.02*tt()),this.paragraphs[t].callFunctionOnAll("setFont",U),this.paragraphs[t].callFunctionOnAll("setRectOrientation",this.sketch.CENTER),this.paragraphs[t].callFunctionOnAll("setTextOrientation",this.sketch.CENTER,this.sketch.CENTER);this.changeScreen=new k(this.keylistener,this.tutorialImages,this.paragraphs,this.screenState,!0),this.changeScreen.setCondition((()=>{this.keylistener.listen()!=l.SELECT||k.isPlaying||(this.keylistener.deactivate(),this.changeScreen.activate())})),this.changeScreen.setAnimation((()=>{this.changeScreen.getShape(3)?this.changeScreen.getShape(2).opacity<255?this.changeScreen.getShape(2).opacity+=4.25:(this.changeScreen.setShape(3,!1),this.changeScreen.deactivate(),this.keylistener.activate()):this.changeScreen.getShape(2).opacity>0?this.changeScreen.getShape(2).opacity-=4.25:(this.changeScreen.setShape(3,!0),this.changeScreen.getShape(2).value>=this.changeScreen.getShape(0).length-1?(this.changeScreen.deactivate(),this.keylistener.activate(),c.changeScreen(o.SETUP_SCREEN,this.sketch)):(this.changeScreen.getShape(2).opacity=0,this.changeScreen.getShape(0)[this.changeScreen.getShape(2).value].setTint(0),this.changeScreen.getShape(1)[this.changeScreen.getShape(2).value].callFunction("setFill",255,255,255,0),this.changeScreen.getShape(2).value++)),this.changeScreen.getShape(0)[this.changeScreen.getShape(2).value].setTint(this.changeScreen.getShape(2).opacity),this.changeScreen.getShape(1)[this.changeScreen.getShape(2).value].callFunction("setFill",255,255,255,this.changeScreen.getShape(2).opacity)})),this.changeScreen.activate()}draw(){this.sketch.background(0),this.tutorialImages[this.screenState[0]].render(),this.paragraphs[this.screenState[0]].callFunctionOnAll("render"),this.changeScreen.listen()}resize(){}}const F=10,b={START_SCREEN_TITLE:"Ultimate TicTacToe",START_SCREEN_MESSAGE:"Press Space to Start",START_SCREEN_AUTHOR:"Made by John Khalife",SETUP_SCREEN_TITLE:"Game Options",LOADING_SCREEN_MESSAGES:["Check out this cool loading screen lol.","To win, you have to get good.","Ultimate Tictactoe is better than TicTacToe","Don't forget to touch grass every once in a while.","Fun Fact: This font doesn't have colons.","Having trouble? Skill issue.","Help, I can't think of loading messages.","I should probably put some actually helpful tips here.","Try to direct your opponent to a square where they can't do anything.","Sometimes, you can force your opponent to send you to an advantageous square.","Try to place your pieces such that there are multiple ways you can score a point."],LOADING_SCREEN_TITLE_MESSAGES:["Seaching for players","Preparing Game"],DOTS:["",".","..","..."],PLAYER_NAMES:["PLAYER O","PLAYER X"]};let z,P,Z,W,B,H,U,Y,V,X,j,K,q,J;function $(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function Q(){return window.innerWidth<=window.innerHeight?window.innerWidth:window.innerHeight}function tt(){return Q()-Q()*F/100}return new(r())((t=>{t.setup=()=>{const e=t.createCanvas(Q()-Q()*F/100,Q()-Q()*F/100);document.getElementById("canvas"),e.parent("canvas"),t.frameRate(60),c.addScreen(_,o.CONTROL_SCREEN),c.addScreen(O,o.GAME_SCREEN),c.addScreen(f,o.LOADING_SCREEN),c.addScreen(v,o.SETUP_SCREEN),c.addScreen(L,o.START_SCREEN),c.addScreen(M,o.TEST_SCREEN),c.addScreen(G,o.TUTORIAL_SCREEN),c.changeScreen(o.TEST_SCREEN,t),t.background(255)},t.draw=()=>{t.fill(255),c.drawScreen()}})),h})()));